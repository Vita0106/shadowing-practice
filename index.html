<!DOCTYPE html>
<html lang="zh">
<head>
  <meta charset="UTF-8" />
  <title>å½±å­è·Ÿè¯»ç»ƒä¹ </title>
  <style>
    body {
      font-family: -apple-system, BlinkMacSystemFont, "PingFang SC", sans-serif;
      max-width: 820px;
      margin: 40px auto;
      line-height: 1.8;
    }

    /* ===== æ§åˆ¶æ¡ ===== */
    .controls {
      display: flex;
      gap: 12px;
      margin-bottom: 16px;
      align-items: center;
    }

    .btn {
      border: 1px solid #ccc;
      background: white;
      padding: 6px 10px;
      border-radius: 8px;
      font-size: 18px;
      cursor: pointer;
    }

    .btn.active {
      background: #dbeafe;
      border-color: #60a5fa;
    }

    /* ===== å¥å­ ===== */
    .sentence {
      padding: 10px;
      border-radius: 8px;
      cursor: pointer;
      margin-bottom: 8px;
    }
    .sentence:hover {
      background: #f3f4f6;
    }
    .sentence.active {
      background: #dbeafe;
    }

    .pinyin {
      font-size: 14px;
      color: #666;
      display: none;
    }

    .trans {
      font-size: 14px;
      color: #999;
      display: none;
    }

    /* ===== å½•éŸ³çŠ¶æ€ ===== */
    .recording {
      color: red;
      font-weight: bold;
    }
  </style>
</head>
<body>

<h2>å½±å­è·Ÿè¯»ç»ƒä¹ </h2>

<!-- ğŸ› æ§åˆ¶æ¡ -->
<div class="controls">
  <button class="btn" id="playBtn">â–¶ï¸</button>
  <button class="btn" id="pauseBtn">â¸</button>
  <button class="btn" id="loopBtn">ğŸ”</button>
  <button class="btn" id="recordBtn">ğŸ™</button>

  <button class="btn" id="togglePinyin">æ‹¼éŸ³</button>
  <button class="btn" id="toggleTrans">ç¿»è¯‘</button>

  <span id="recordStatus"></span>
</div>

<hr />

<div id="content"></div>

<audio id="audio" src="audio.mp3"></audio>

<script>
/* ========= å†…å®¹åŒºï¼ˆä½ åªæ”¹è¿™é‡Œï¼‰ ========= */

const sentences = [
  {
    zh: "ä»Šå¤©å¤©æ°”å¾ˆå¥½ã€‚",
    pinyin: "JÄ«ntiÄn tiÄnqÃ¬ hÄ›n hÇo.",
    trans: "Today the weather is very nice."
  },
  {
    zh: "æˆ‘ä»¬ä¸€èµ·å»å–å’–å•¡å§ã€‚",
    pinyin: "WÇ’men yÃ¬qÇ qÃ¹ hÄ“ kÄfÄ“i ba.",
    trans: "Let's go have coffee together."
  },
  {
    zh: "ä½ è§‰å¾—æ€ä¹ˆæ ·ï¼Ÿ",
    pinyin: "NÇ juÃ©de zÄ›nmeyÃ ng?",
    trans: "What do you think?"
  }
];

/* ========= åŸºç¡€ ========= */

const content = document.getElementById("content");
const audio = document.getElementById("audio");

let timings = [];
let currentIndex = null;
let stopTimer = null;
let loopOn = false;

/* ========= æ¸²æŸ“å¥å­ ========= */

sentences.forEach((s, i) =>
